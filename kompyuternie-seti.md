# Компьютерные сети

### Быстрый расчет IP сетей

 В сегодняшней статье мы постараемся отметить основные моменты для быстрого расчета IPv4 сетей. Хоть сейчас и идет постепенный переход на IPv6, все же IPv4 адресация еще долго будет в тренде и умение быстро рассчитывать IPv4 сети многим может пригодиться. Данная статья написана и оформлена совместно с моим коллегой и преподавателем сетевой академии CISCO — Кузьминым Евгением.

 Все мы привыкли к отображению IP адреса в виде четырех десятичных чисел, разделенных точками \(также их называют октетами, так как они формируются из 8 бит\). Все мы знаем, что компьютер для расчетов использует двоичную систему счисления, поэтому для компьютера сетевой адрес, например 192.168.1.1, имеет вид:

#### **11000000 10101000 00000001 00000001**

[![](http://itmultimedia.ru/wp-content/uploads/2014/05/1.jpg "1")](http://itmultimedia.ru/wp-content/uploads/2014/05/1.jpg)

 Маска подсети в двоичном виде выглядит как последовательность единиц, а затем нулей и указывает на то, сколько первых битов IP-адреса будут относится к адресу сети \(у всех компьютеров в одной сети они будут одинаковые\), а остальные биты будут относится к адресу каждого узла \(у всех компьютеров в одной сети они будут разные\). Есть специальные адреса: адрес сети — адрес, у которого узловая часть состоит из одних нулей, и широковещательный адрес — это адрес, у которого  узловая часть состоит из одних единиц. Например, маска вида 255.255.255.0 в двоичном виде выглядит:

#### **11111111 11111111 111111111 00000000**

и указывает на то, что первые 24 бита относятся к адресу сети, а последние восемь к адресу конкретного узла в этой сети. Маска сети также может быть записана, как просто число, указывающее количество первых битов, относящихся к адресу сети. В данном случае — 24.

 Со стандартными маскам все легко, они имеют вид; 255.0.0.0, 255.255.0.0 и 255.255.255.0 и четко отделяют узловую часть от сетевой по границе каждого октета. Поэтому, для формировани адреса сети, октеты, у которых маска 255, мы не изменяем. а октеты у которых маска 0, превращаем в 0 \(для широковещательного адреса в 255\). Напимер, для адреса 192.168.25.128 с маской 255.255.0.0, адрес сети будет 192.168.0.0, а широковещательный – 192.168.255.255.

 Но когда нужно разделить сети на более мелкие подсети или объединить несколько сетей в одну общую могут возникнуть сложности. Основное — это запомнить, что каждое десятичное число в адресе состоит из 8 двоичных битов, и нужно знать десятичное значение каждого бита, которое является степенью двойки.

[![](http://itmultimedia.ru/wp-content/uploads/2014/05/2.jpg "2")](http://itmultimedia.ru/wp-content/uploads/2014/05/2.jpg)  
[  
Любое число в адресе является суммой некоторых степеней двойки. Чтобы определить каких, нужно их последовательно складывать, двигаясь от 128 к 1, если сумма будет превышать нужное число, то эту степень пропускаем. Ниже приведу несколько примеров, в которых покажу основные алгоритмы расчета.](http://itmultimedia.ru/wp-content/uploads/2014/05/2.jpg)

### Пример 1

_**Есть IP адрес 192.168.1.37/28, необходимо определить адрес сети и широковещательный адрес.**_

* Всего бит в адресе: 32, количество бит на адрес сети: 28, следовательно количество бит на адреса узлов: 32 – 28 = 4 бита.
* Количество возможных адресов для подсети: 2^4 = 16.
* Количество адресов для хостов \(за минусом адреса сети и широковещательного адреса\): 16 – 2 = 14.
* У адреса сети значения первых трех октетов будет таким же, как у адреса хоста, а значение последнего октета будет наибольшее число, не превышающее его значения в адресе хоста, кратное 16. И следовательно может формироваться из суммы: 128 или 64 или 32 или 16.

[![](http://itmultimedia.ru/wp-content/uploads/2014/05/3.jpg "3")](http://itmultimedia.ru/wp-content/uploads/2014/05/3.jpg)

* Получаем адрес сети: 192.168.1.32
* Широковещательный адрес получаем прибавив к последнему октету адреса сети количество адресов сети минус 1:  192.168.1.{32+16-1}= 192.168.1.47

### Пример 2

_** Есть IP адрес 192.168.1.37/255.255.255.240, необходимо определить адрес сети.**_

* Количество адресов для подсети можно получить: 256 — 240 = 16.
* Количество адресов для хостов 16 – 2 = 14.
* У адреса сети, как и в прошлом примере, значения первых трех октетов будет таким же, как у адреса хоста, а значение последнего октета будет наибольшее число, не превышающее его значения в адресе хоста, кратное 16. И следовательно может формироваться из суммы: 128 или 64 или 32 или 16.

[![](http://itmultimedia.ru/wp-content/uploads/2014/05/3.jpg "3")](http://itmultimedia.ru/wp-content/uploads/2014/05/3.jpg)

 Получаем адрес сети 192.168.1.32

### Пример 3[ ](http://itmultimedia.ru/wp-content/uploads/2014/05/4.jpg)

_** Записать маску вида 255.255.255.240 в маску вида “/x”.**_

*  256 – 240 = 16.
* 16 = 2^4.  4 бита отводятся на адреса.
* А так как всего бит 32, то 32 – 4 = 28.

Значит 255.255.255.240 = /28

### Пример 4

_**Записать маску вида /28 в маску вида XXX.XXX.XXX.XXX**_

*  Всего бит: 32.
* Количество Бит на адреса: 32 – 28 = 4.
* 2^4=16.  16 адресов в подсети.
* 256 – 16 = 240.

Значит маска: 255.255.255.240.

  


